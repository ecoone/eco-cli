eco.namespace("mob"),mob.meta({name:"mob运营系统",author:"运营开发组",version:"0.0.1",description:"主要是运营前端系统",participator:"运营开发组"}),mob.getQueryString=function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(n);return null!=t?decodeURIComponent(t[2]):null},mob.pxToRem=function(e){var n=document.documentElement,t=n.getBoundingClientRect().width,o=640,i=100,r=t/(o/i),a=e/r;return a},mob.rootFontSize=document.documentElement.getBoundingClientRect().width/6.4,mob.remToPx=function(e){return e*mob.rootFontSize},mob.setCookie=function(e,n,t,o,i,r){var a=encodeURIComponent(e)+"="+encodeURIComponent(n);t||(t=new Date,t.setTime(t.getTime()+2592e6)),t instanceof Date&&(a+="; expires="+t.toGMTString()),o&&(a+="; path="+o),i||(i=".tuniu.com"),i&&(a+="; domain="+i),r&&(a+="; secure"),document.cookie=a},mob.getCookie=function(e){var n=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==n?n[2]:""},mob.isApp=function(){var e=parseInt(mob.getCookie("deviceType"),10);return 0==e||1==e}(),mob.isWeixin=function(){return navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1}(),mob.isM=function(){return!mob.isApp&&!mob.isWeixin}(),mob.fta=function(e){var n="/"+e.replace(new RegExp(":","gm"),"/");window.FTA&&window.FTA("",e,"",n)},mob.initWebviewBridge=function(){mob.webviewBridgeInited||(WebViewJavascriptBridge.init(function(e,n){}),mob.webviewBridgeInited=!0)},mob.webviewBridgeReady=function(e){window.WebViewJavascriptBridge?(mob.initWebviewBridge(),e(WebViewJavascriptBridge)):document.addEventListener("WebViewJavascriptBridgeReady",function(){mob.initWebviewBridge(),e(WebViewJavascriptBridge)},!1)},mob.callBridge=function(e,n,t){mob.webviewBridgeReady(function(o){o.callHandler(e,n,t)})},mob.getMultiWindowStatus=function(e){mob.callBridge("getMultiWindowStatus",{},e)},mob.setMaskInMultiWindow=function(){function e(e){if(e=JSON.parse(e)){var n=document.getElementById("mitiwindow-mask");1==e.status?n.style.display="block":n.style.display="none"}}mob.webviewBridgeReady(function(n){var t=document.body,o=document.createElement("div");o.id="mitiwindow-mask",o.style.cssText="z-index:9999;position:fixed;left:0px;top:0px;width:100%;height:100%;line-height:100%;text-align:center;background:rgba(0,0,0,0.5);font-size:18px;color:#fff;padding-top: 50%;display:none;",o.innerHTML="当前处于分屏模式下，页面不可用",t.appendChild(o),mob.getMultiWindowStatus(function(n){e(n)}),n.registerHandler("onMultiWindowsStatusChange",function(n){e(n)})})},mob.cdnHostUrl=window.eventConfig?window.eventConfig.cdnHost:"",mob.resBaseUrl=window.eventConfig?window.eventConfig.resBaseUrl:"",mob.getResUrl=function(e,n){var t="src";return n&&(t="dist"),window.eventConfig?window.eventConfig.resBaseUrl+"/event/"+e+"/dist/":"../../"+e+"/"+t+"/"},mob.getHost=function(){var e=window.location.host,n=window.location.protocol;return-1!=e.indexOf("tuniu.com")?(0!=e.indexOf("dynamic")&&(e="dynamic."+e),e=n+"//"+e):e=n+"//dynamic.m.tuniu.com",e},mob.getPFromURL=function(){for(var e=window.location.hash.slice(1).split("&").concat(window.location.search.slice(1).split("&")),n={},t=0;t<e.length;t++){var o=e[t].split("=");n[o[0]]=o[1]}return n.p},mob._updatePvalueandTel=function(){function e(e){return document.getElementById(e)}var n=mob.getHost(),t={partner:{p:mob.getPFromURL()||"",referer:encodeURIComponent(document.referrer)}};t.phone="";var o=new XMLHttpRequest;o.open("GET",n+"/event/mGlobal/index?data="+encodeURIComponent(JSON.stringify(t))),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var n=JSON.parse(o.responseText);if(n.success){n=n.data;var t=n.phone;t&&localStorage.setItem("400phone",t),t&&e("telConsult")&&(e("telConsult").href="tel:"+t)}}},o.withCredentials=!0,o.send(null)},mob._updatePvalueandTel();
eco.define("dialog",["zepto"],function(a){function b(){return navigator.userAgent.toLowerCase().indexOf("samsung gt-i9505")>-1}function c(c){function j(a){a.header&&h.dialogBox.append(h.header),a.body&&h.dialogBox.append(h.body),a.okBtn&&h.footer.append(h.okBtn),a.cancelBtn&&h.footer.append(h.cancelBtn),a.footer&&h.dialogBox.append(h.footer)}function k(){var b=a(".dialog-box").height(),c=(h.oh-b)/3;a(".dialog-box").css({top:c})}function l(a){a.preventDefault()}function m(){h.body.html(a('<span class="dialog-message">'+h.body.html()+"</span>")).prepend(h.icon),"center"===e.align&&""===e.mood&&h.body.find(".dialog-message").css("display","inline-block"),h.body.css("text-align",e.align)}var h,i,d={type:"confirm",title:"",message:"",messageSize:"0.24rem",okText:"确认",cancelText:"取消",mood:"",iconW:"70px",align:"center",duration:"2000",okCallback:function(){},cancelCallback:function(){},onload:function(){}},e=a.extend({},d,c),f=void 0,g=void 0;switch(a(".dialog-box").length&&(a("#dialogStyle").remove(),a(".dialog-mask").remove(),a(".dialog-box").remove(),clearTimeout(f),clearTimeout(g)),h={ow:document.documentElement.clientWidth,oh:document.documentElement.clientHeight,fontSize:"1.5rem",color:"#666",mask:a('<div class="dialog-mask"></div>'),dialogBox:a('<div class="dialog-box"></div>'),header:a('<div class="dialog-header"></div>'),body:a('<div class="dialog-body"></div>'),footer:a('<div class="dialog-footer"></div>'),okBtn:a('<div class="dialog-ok"></div>'),cancelBtn:a('<div class="dialog-cancel"></div>'),icon:a('<span class="'+("positive"===e.mood?"dialog-icon icon-tk-tick":"negative"===e.mood?"dialog-icon icon-tk-X":"")+'"></span>')},h.iw=.8*h.ow,h.ih=350,h.maskCss=".dialog-mask{position:fixed;top:0;left:0;width: 100%;height:"+h.oh+"px;background-color: rgba(0,0,0,0.3);z-index: 999;}",h.dialogCss=".dialog-box{opacity:0;position: fixed;left: "+.2*h.ow+"px;width: 60%;border:2px solid #505050;z-index: 999;font-size:"+h.fontSize+";color:"+h.color+";background-color:#363636;color:#fff;text-shadow:0 0 3px #000;"+(b()?"":"-webkit-box-shadow:0 2px 3px rgba(0,0,0,0.5);border-radius:16px;")+"}"+".dialog-header{height: 50px; border-bottom:1px solid #4b4b4b;}"+".dialog-body{padding:"+(640==window.innerWidth?"20px":"10px")+";font-size:"+e.messageSize+";}"+".dialog-footer{overflow:hidden; border-top: 1px solid #4b4b4b;font-size:"+e.messageSize+";}"+".dialog-ok{width: 50%;text-align: center;float: left;line-height: 222.22%;}"+".dialog-cancel{width: 49%;border-left: 1px solid #4b4b4b;text-align: center;float: right;line-height: 222.22%;}"+".dialog-box.hide{opacity:0; -webkit-transition: opacity 3s; transition: opacity 3s;}"+".dialog-box.show{opacity:1; -webkit-transition: opacity 1s; transition: opacity 1s;}"+".dialog-icon{font-size:3.0rem; padding-right:20px; vertical-align:middle;display:table-cell;width:"+e.iconW+";text-align:right;color:#ddd;}"+".dialog-message{display:table-cell;text-align:left;}",h.header.html(e.title),h.body.html(e.message),h.okBtn.html(e.okText),h.cancelBtn.html(e.cancelText),i={},i.show=function(){"info"==e.type?(a(".dialog-box").removeClass("hide").addClass("show"),f=setTimeout(i.hide,e.duration)):"loading"==e.type?a(".dialog-box").removeClass("hide").addClass("show"):(a(".dialog-mask").show(),a(".dialog-box").removeClass("hide").addClass("show"),a(".dialog-mask").on({mousewheel:l,touchstart:l}))},i.hide=function(){"info"==e.type?(a(".dialog-box").removeClass("show").addClass("hide"),g=setTimeout(function(){a("#dialogStyle").remove(),a(".dialog-mask").remove(),a(".dialog-box").prev().remove(),a(".dialog-box").remove()},3e3)):(a("#dialogStyle").remove(),a(".dialog-mask").remove(),a(".dialog-box").remove())},e.type){case"confirm":m(),j({body:h.body,footer:h.footer,okBtn:h.okBtn,cancelBtn:h.cancelBtn});break;case"info":m(),j({body:h.body}),h.mask=a("<div></div>"),h.dialogBox.css({"background-color":"rgba(0,0,0,0.6)",color:"#fff",border:"none","border-radius":"5px","text-align":"center"});break;case"alert":m(),j({body:h.body,footer:h.footer,okBtn:h.okBtn}),h.okBtn.css("width","100%");break;case"custom":j({header:h.header,body:h.body,footer:h.footer,okBtn:h.okBtn,cancelBtn:h.cancelBtn});break;case"loading":m(),j({body:h.body}),h.dialogBox.css({"background-color":"rgba(0,0,0,0.6)",color:"#fff",border:"none","border-radius":"5px","text-align":"center"})}h.okBtn.click(function(){var b=e.okCallback();"stop"!=b&&i.hide()}),h.cancelBtn.click(function(){e.cancelCallback(),"stop"!=stop&&i.hide()}),a(document).find("head").append('<style id="dialogStyle"></style>'),a("#dialogStyle").text(h.maskCss+h.dialogCss),a("body").append(h.mask).append(h.dialogBox),k(),i.show(),"loading"==e.type&&e.onload(i)}return c.alert=function(a){c({type:"alert",message:a})},c.tip=function(a){c({type:"info",align:"center",message:a})},c});